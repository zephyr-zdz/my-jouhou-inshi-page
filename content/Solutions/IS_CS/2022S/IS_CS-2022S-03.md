# IS CS-2022S-03

**题目来源**：[[2022S#Problem 3]]
**日期**：2024-07-01
**题目主题**：CS-Formal Languages-String Pattern Matching and Finite Automata

## 解题思路

这道题目涉及到形式语言理论中的几个重要概念：正则语言、有限自动机、上下文无关语言和下推自动机。

在本题中，我们处理字母表 $\Sigma_1 = \{a, b\}$ 和 $\Sigma_2 = \{t, f\}$ 上的字符串及其转换。首先，我们要定义如何将一个字符串 $w \in \Sigma_1^*$ 转换成另一个字符串 $\Sigma_2^{|w|}$，其中 $|w|$ 表示字符串的长度。这个转换基于在字符串 $w'$ 中找到的子串 $w$ 的起始位置，并在这些位置替换成 $t$，其他位置替换成 $f$。

我们需要理解给定的函数 $f_w$ 和 $f_w^*$ 的定义，然后应用这些概念来解答问题。每个小问都建立在前面的基础上，逐步深入到更复杂的概念。第四问与第三问紧密相关，我们可以利用第三问的思路来解答第四问。

## Solution

### 1. Compute $f_{aba}(babababa)$

Let's analyze the string `babababa` and mark the positions where "aba" appears as a subword:

```
b a b a b a b a
  ^ ^ ^
      ^ ^ ^
          ^ ^ ^
```

Now, let's replace these starting positions with 't' and the rest with 'f':

$$f_{aba}(babababa) = ftftftff$$

### 2. Express $f_{ab}(\Sigma_1^*)$ by using a regular expression

To construct this regular expression, we need to consider all possible ways `aba` can appear in a string:

1. The string might start with `aba`: $(tf)^*$
2. There might be any number of a's or b's before `ab`: $(f^*tf)^*$
3. The string might end with any number of a's or b's: $f^*$

Combining these, we get:

$$(f^*tf)^*f^*$$

Therefore, $f_{ab}(\Sigma_1^*) = (f^*tf)^*f^*$

## 3. Non-deterministic finite automaton for $f_w^*(L)$

Let $A = (Q, \Sigma_1, \delta, q_0, F)$ be the given DFA that accepts $L$. Let $w_n \in \Sigma_1$ be the $n$-th figure of word $w$. We can construct an NFA $A' = (Q', \Sigma_2, \delta', q_0', F')$ that accepts $f_w^*(L)$ as follows:

1. $Q' = Q \times \{0, 1, …, |w|\}$
2. $q_0' = (q_0, 0)$
3. $F' = \{(q, i) \mid q \in F, 0 \leq i \leq |w|\}$
4. For the transition function $\delta'$:
   - For each $(q, i) \in Q'$ and $\lambda \in \Sigma_1$:
     - If $i < |w|$ and $\lambda = w_{i+1}$:
	     - Add $\epsilon$-transition from $(q, i)$ to $(\delta(q, \lambda), i+1)$
     - If $i < |w|$ and $\lambda \neq w_{i+1}$:
	     - Add $f$-transition from $(q, i)$ to $(\delta(q, \lambda), 0)$
     - If $i = |w|$:
	     - Add $t$-transition from $(q, i)$ to $(\delta(q, \lambda), 0)$

This NFA simulates the DFA $A$ while keeping track of potential matches of $w$ during each of the transitions in $A$. When a complete match is found, it accepts 't', otherwise 'f'.

### 4. Prove or disprove: If $L$ is context-free, then $f_w^*(L)$ is context-free

This proposition is true. We can prove it by constructing a pushdown automaton (PDA) that accepts $f_w^*(L)$, using a similar approach to the NFA construction in Question 3.

**Proof Sketch**:
Let $M = (Q, \Sigma_1, \Gamma, \delta, q_0, Z_0, F)$ be a PDA that accepts $L$. Let $w_n \in \Sigma_1$ be the $n$-th symbol of word $w$. We can construct a PDA $M' = (Q', \Sigma_2, \Gamma, \delta', q_0', Z_0, F')$ that accepts $f_w^*(L)$ as follows:

1. $Q' = Q \times \{0, 1, …, |w|\}$
2. $q_0' = (q_0, 0)$
3. $F' = \{(q, i) \mid q \in F, 0 \leq i \leq |w|\}$
4. For the transition function $\delta'$:
   - For each $((q, i), \lambda, \gamma) \in Q' \times (\Sigma_2 \cup \{\epsilon\}) \times \Gamma$:
     - If $i < |w|$ and $\lambda = w_{i+1}$:
       - For each $(p, \alpha) \in \delta(q, \lambda, \gamma)$, add $((p, i+1), \alpha)$ to $\delta'((q, i), \epsilon, \gamma)$
     - If $i < |w|$ and $\lambda \neq w_{i+1}$:
       - For each $(p, \alpha) \in \delta(q, \lambda, \gamma)$, add $((p, 0), \alpha)$ to $\delta'((q, i), f, \gamma)$
     - If $i = |w|$ and $a = t$:
       - For each $\lambda \in \Sigma_1$ and $(p, \alpha) \in \delta(q, \lambda, \gamma)$, add $((p, 0), \alpha)$ to $\delta'((q, i), t, \gamma)$

**Explanation**:

- Similar to the NFA construction in Question 3, the state $(q, i)$ represents that we are in state $q$ of the original PDA and have matched $i$ symbols of $w$.
- The $\epsilon$-transitions simulate the original PDA's transitions for matching the next symbol of $w$.
- The $f$-transition occurs for positions where $w$ is not matched, resetting the match counter to 0.
- The $t$-transition occurs when we complete a match of $w$, also resetting the match counter to 0.

This PDA $M'$ simulates the computations of $M$ while keeping track of occurrences of $w$ and outputting the corresponding string in $\Sigma_2^*$. Therefore, $f_w^*(L)$ is context-free.

**Note**: The key difference between this construction and the one in Question 3 is that we're now working with a PDA instead of a DFA, which allows us to handle the stack operations necessary for context-free languages. However, the core idea of tracking partial matches of $w$ remains the same.

## 知识点

#DFA #NFA #PDA #正则表达式 #上下文无关语言 #下推自动机

## 难点思路

1. 理解函数 $f_w$ 和 $f_w^*$ 的定义及其在字符串和语言上的作用。
2. 构造接受 $f_w^*(L)$ 的非确定性有限自动机，需要巧妙地结合原 DFA 和模式匹配。
3. 将 NFA 构造的思路扩展到 PDA，以证明 $f_w^*(L)$ 的上下文无关性。

## 解题技巧和信息

1. 在处理形式语言问题时，尝试从简单的例子开始，然后推广到一般情况。
2. 在构造自动机或文法时，考虑如何将问题的不同方面（如这里的 PDA 转换和模式匹配）结合起来。
3. 对于复杂的语言操作，考虑如何使用现有的形式语言工具（如 NFA、PDA）来模拟这些操作。
4. 注意识别问题之间的联系，如第三问和第四问之间的关系，可以帮助简化解题过程。
5. 在扩展 NFA 到 PDA 时，要注意保持状态转换的基本结构，同时增加对栈操作的处理。

## 重点词汇

- deterministic finite automaton (DFA) 确定性有限自动机
- non-deterministic finite automaton (NFA) 非确定性有限自动机
- pushdown automaton (PDA) 下推自动机
- context-free grammar (CFG) 上下文无关文法
- regular expression 正则表达式
- $\epsilon$-transition $\epsilon$-转换

## 参考资料

1. Introduction to Automata Theory, Languages, and Computation by John E. Hopcroft, Rajeev Motwani, Jeffrey D. Ullman. Chapter 2 (Finite Automata), Chapter 3 (Regular Expressions and Languages), Chapter 5 (Context-Free Grammars and Languages), Chapter 6 (Pushdown Automata)
2. Formal Languages and Automata Theory by C. K. Nagpal. Chapters on Regular Languages, Context-Free Languages, and Pushdown Automata
